I"B<h3 id="gerstner-waves">Gerstner Waves</h3>

<p>The way that ocean rendering is typically simulated in 3d rendering is using <strong>Gerstner Waves</strong>.
Unlike sine waves which will only displace the surface in the up axis (z), Gerstner Waves offer a physically accurate simulation of how individual waves actually flow, by also offsetting the other two axis.</p>

<p>You can see in the gif below how the vertices in the water plane move, with them getting more compact closer to the peaks, and less in the troths.</p>

<p><img src="https://www.dropbox.com/s/td3ha3q5tcj89gn/wireframe_render.gif?raw=1" alt="Image" class="center-image" /></p>

<hr />

<p>Since Gerstner Waves are a physical calculation of waves, it means real world parameters can also be used.</p>

<p>The typical inputs for the gerstner function which are used here include:</p>

<ul>
  <li>
    <p>Amplitude, the overall height of the wave (in Centimeters in this case)</p>
  </li>
  <li>
    <p>Steepness, which controls the “sharpness” of the wave</p>
  </li>
  <li>
    <p>Phase, the overall speed of the Gerstner Wave</p>
  </li>
</ul>

<p>Since this uses a physical calculation for the waves, it means that the input parameters also use real-world values. Some of the most notable ones being: Amplitude, Steepness Phase and Direction. Similarly, since this uses a wave it means that multiple waves of different amplitude/wavelength can be combined by simply adding them together, to give a more detailed ouput. In this I used a total of 16 wave formations (8 being low frequency, 8 being high frequency)</p>

<p><img src="https://www.dropbox.com/s/m1ytipf8oo0udws/subsurface.jpg?raw=1" alt="Image" class="center-image" /></p>

<h3 id="detailing-normals">Detailing Normals</h3>

<p>Although the waves themselves do a large part in the realism of the shader, without additional surface detailing they end up looking quite flat. To fix this I used 3 sets of normals at different frequencies (High for main body detailing, Medium for subtle waves and Low for lower frequency ripples and surface disturbance).</p>

<p>Normals alone tend to give a rather static and tiling look to the surface, so phasing between the textures in two states (similar to a flow map) also helps in avoiding this.</p>

<p>Although the Gerstner calculations themselves do a huge part in making the shader feel realistic, without any additional surface detailing you’ll find that they still end up looking extremely flat.</p>

<p><img src="https://www.dropbox.com/s/e1ntjrsi5ic8f2d/normals_comparison.gif?raw=1" alt="Image" class="center-image" /></p>

<h3 id="sea-foam">Sea Foam</h3>
<p>Foam is an area I’ve seen typically overlooked in some shaders, but found that even a subtle amount gives a nice effect. Unlike waves I couldn’t find a way of physically simulating this in realtime, so the way it is calculated uses some data from the Gerstner wave to create an ‘Amplitude Mask’.</p>

<p>The foam mask was created in Substance Designer, and is a 2 channel mask of Worley noise distorted into a fluid like mask. It uses the phasing method mentioned before to give a nice fluid effect.</p>

<p><img src="https://www.dropbox.com/s/hfgnq407hfo971z/foam_render.gif?raw=1" alt="Image" class="center-image" /></p>

<p><img src="https://www.dropbox.com/s/b2017ok81rbo79p/foam_noise.jpg?raw=1" alt="Image" class="center-image" /></p>
:ET